<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width, initial-scale=1.0"><title>账号中心</title><style>body{font-family:Arial,sans-serif;background-color:#f5f5f5;margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh}.main-container{width:100%;max-width:800px;display:flex;background-color:white;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,0.1);overflow:hidden}.nav-section{background-color:#f8f9fa}.nav-title{padding:0 20px 20px;font-size:18px;font-weight:bold;color:#495057}.nav-tab{padding:12px 20px;cursor:pointer;color:#495057;transition:all 0.3s}.nav-tab:hover{background-color:#e9ecef}.nav-tab.active{background-color:#4285f4;color:white}.content-section{flex:1;padding:40px}.content-title{font-size:24px;margin-bottom:30px;color:#212529}.form-container{max-width:400px;margin:0 auto}.form-group{margin-bottom:20px}label{display:block;margin-bottom:8px;font-weight:bold;color:#495057}input{width:100%;padding:12px;border:1px solid#ced4da;border-radius:4px;box-sizing:border-box;font-size:16px}button{width:100%;padding:14px;background-color:#4285f4;color:white;border:none;border-radius:4px;cursor:pointer;font-size:16px;margin-top:10px;transition:background-color 0.3s}button:hover{background-color:#3367d6}.verify-group{display:flex;gap:10px}.verify-group input{flex:1}.verify-btn{width:auto;padding:0 15px;background-color:#f8f9fa;color:#495057;border:1px solid#ced4da}.verify-btn:hover{background-color:#e9ecef}.message{margin-top:20px;padding:12px;border-radius:4px;display:none}.error{background-color:#ffebee;color:#d32f2f;border:1px solid#ef9a9a}.success{background-color:#e8f5e9;color:#388e3c;border:1px solid#a5d6a7}.hidden{display:none}</style></head><body><div class="main-container"><!--左侧导航区--><div class="nav-section"><div class="nav-title">账号中心</div><div class="nav-tab active"data-tab="password">密码登录</div><div class="nav-tab"data-tab="email">邮箱登录</div><div class="nav-tab"data-tab="register">注册账号</div></div><!--右侧内容区--><div class="content-section"><h2 class="content-title"id="content-title">密码登录</h2><div class="form-container"><form id="auth-form"><!--通用字段--><div class="form-group"><label for="username">用户名</label><input type="text"id="username"placeholder="请输入用户名"required></div><!--邮箱字段-现在所有模式都显示--><div class="form-group"><label for="email">邮箱</label><input type="email"id="email"placeholder="请输入邮箱"></div><!--密码登录字段--><div id="password-fields"><div class="form-group"><label for="password">密码</label><input type="password"id="password"placeholder="请输入密码"></div></div><!--邮箱登录/注册字段--><div id="email-fields"class="hidden"><div class="form-group"><label for="verify-code">验证码</label><div class="verify-group"><input type="text"id="verify-code"placeholder="请输入验证码"><button type="button"id="get-verify-code"class="verify-btn">获取验证码</button></div></div></div><!--注册专用字段--><div id="register-fields"class="hidden"><div class="form-group"><label for="reg-password">密码</label><input type="password"id="reg-password"placeholder="6-20位字母数字或符号"></div></div><button type="submit"id="submit-btn">登录</button><div id="auth-message"class="message"></div></form></div></div></div><script>document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".nav-tab"),t=document.getElementById("content-title"),n=document.getElementById("auth-form"),d=document.getElementById("password-fields"),s=document.getElementById("email-fields"),i=document.getElementById("register-fields"),o=document.getElementById("submit-btn"),a=document.getElementById("get-verify-code");let l="password";function c(e,t){const n=document.getElementById("auth-message");n.textContent=e,n.className="message "+(t?"success":"error"),n.style.display="block"}function m(e){200===e.code?(c("register"===l?"注册成功，正在跳转...":"登录成功，正在跳转...",!0),setTimeout(()=>{window.location.href="/list"},1e3)):c(e.msg,!1)}e.forEach(n=>{n.addEventListener("click",function(){e.forEach(e=>e.classList.remove("active")),this.classList.add("active"),l=this.dataset.tab,t.textContent=this.textContent,d.classList.add("hidden"),s.classList.add("hidden"),i.classList.add("hidden"),"password"===l?(d.classList.remove("hidden"),o.textContent="登录"):"email"===l?(s.classList.remove("hidden"),o.textContent="登录"):"register"===l&&(i.classList.remove("hidden"),s.classList.remove("hidden"),o.textContent="注册")})}),a.addEventListener("click",function(){const e=document.getElementById("email").value.trim();e&&/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e)?fetch("/login/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e})}).then(e=>e.json()).then(e=>{if(200===e.code){c("验证码已发送到邮箱",!0),a.dataset.id=e.id;let t=60;a.disabled=!0;const n=a.textContent,d=setInterval(()=>{a.textContent=`重新发送(${t})`,--t<0&&(clearInterval(d),a.textContent=n,a.disabled=!1)},1e3)}else c(e.msg||"验证码发送失败",!1)}).catch(e=>c("网络错误: "+e,!1)):c("请输入有效的邮箱地址",!1)}),n.addEventListener("submit",function(e){e.preventDefault(),c("",!0);const t=document.getElementById("username").value.trim(),n=document.getElementById("email").value.trim(),d=document.getElementById("password").value.trim(),s=document.getElementById("verify-code").value.trim(),i=document.getElementById("reg-password").value.trim();let o={};"password"===l?o={type:"log",name:t,mail:n,password:d}:"email"===l?o={type:"e-log",name:t,mail:n,verify:s,id:a.dataset.id}:"register"===l&&(o={type:"reg",name:t,mail:n,password:i,verify:s,id:a.dataset.id}),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(m).catch(e=>c("网络错误: "+e,!1))})});</script></body></html>