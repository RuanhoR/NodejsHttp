"use strict";const fs=require("fs/promises"),mime=require("mime-types"),fs_=require("fs");function _log(t){return fs.appendFile("./lib/data/main.log",`\n[${new Date}] ${t}`),console.log(""),console.log(`[${new Date}]`),console.log(t),t}async function setFile(t,e){try{await fs.writeFile(t,e)}catch(t){_log("[WriteFileError] "+t)}}function Exit(t="Close"){throw fs_.writeFileSync("./lib/data/verify.json","{}"),fs_.writeFileSync("./lib/data/main.log",""),fs_.writeFileSync("./lib/data/exit.log","3"),new Error(t)}const readline=require("readline");async function input(t=""){const e=readline.createInterface({input:process.stdin,output:process.stdout});return new Promise(i=>{e.question(t,t=>{e.close(),i(t)})})}function getP(t,e){if("string"!=typeof t||"string"!=typeof e)return"";const i=t.split("\n");for(const t of i){const i=t.trim();if(!i||i.startsWith("#")||i.startsWith("!"))continue;const r=i.includes("=")?"=":":",[s,...n]=i.split(r);if(s.trim()===e){let t=n.join(r).split("#")[0].trim();try{if(/^-?\d+\.?\d*$/.test(t))return parseFloat(t);if("true"===t.toLowerCase())return!0;if("false"===t.toLowerCase())return!1;if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))return JSON.parse(t)}catch(e){_log(`[getProp] 类型转换失败，保持字符串格式: ${t}`)}return t||""}}return""}async function GetFile(t,e="JSON"){try{await fs.readFile(t,"utf8").then(t=>t)}catch(t){return"JSON"===e?"{}":null}}function KillBadWord(t){return t.replace(/(s\s*b|t\s*m\s*d|n\s*m\s*s\s*l|cao|fuck|shit|bitch|wcnm|rnm|挂|\*|(他|它|她)\s*妈\s*的)/gi,"**")}module.exports={GetFile:GetFile,setFile:setFile,_log:_log,KillBadWord:KillBadWord,getP:getP,uuid4:require("crypto").randomUUID,input:input,Exit:Exit};